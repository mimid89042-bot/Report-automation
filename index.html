<!DOCTYPE html>
<html lang = "en">
<head>
    <title>BRE Calculation</title>
    <meta charset= "utf-8">
    <meta name = "viewport" content = "width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
<!-- REPORT HEADER PAGE 1-->
<div class="report-header">
    <!-- Left column -->
    <div class="header-column">
        <label for="projectNo">Project No:</label>
        <input type="text" id="projectNo" placeholder="Enter project number"><br>

        <label for="designer">Designer:</label>
        <input type="text" id="designer" placeholder="Enter designer name">
    </div>

    <!-- Center column -->
    <div class="header-column center-column">
        <img src="logo.png" alt="Logo" class="logo">
    </div>

    <!-- Right column -->
    <div class="header-column right-column">
        <label for="reportDate">Date:</label>
        <input type="date" id="reportDate"><br>

        <span>Page 1 of 2</span>
    </div>
</div>


<div class = "report-container">
<h1>BRE Calculation</h1>

<!-- INPUTS -->
<form id="cohesive-inputs">
    <div class="box">
        <label for="soilType">Subgrade Soil Type:</label>
        <select id="soilType" required title="subgrade soil type required">
            <option value="">-- Select Soil Type --</option>
            <option value="cohesive">Cohesive</option>
            <option value="granular">Granular</option>
        </select>
    </div>
<!-- MANUAL BOXES-->

    <div id="cohesiveInputs" class="box hidden">
        <h3>Design values for ground properties</h3>

        <div class="container">
            <div class="cell">
                <label for="subgrade">Subgrade &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp  &nbsp &nbsp &nbsp  &nbsp &nbsp &nbsp  </label>
                <label>C<sub>u</sub> (kPa):</label>
                <input type="number" id="cu" step="0.01" required value = "24">
            </div>

            <div class="cell">
                <label for="phi">Working platform  &nbsp &nbsp &nbsp &nbsp &nbsp  &nbsp &nbsp &nbsp</label>
                <label>ϕ'<sub>p</sub> (°):</label>
                <input type="number" id="phi" step="0.01" required value = "40">
                <label for="gamma">  </label>
                <label>&nbsp &nbsp γ<sub>p</sub> (kN/m³):</label>
                <input type="number" id="gamma" step="0.01" required value = "20">
            </div>
       </div>

        <h3>Design values for track width and effective length</h3>

        <div class="cell">
            <label>W<sub>d</sub> (m): </label>
            <input type = "number" id = "W"  step="0.01" required value = "0.7">
        </div>


        <div class="cases-container">
        <div class="case-column">
            <p class= "underline">Case 1 loading inputs</p>
            <label>q<sub>1k</sub> (kPa):
                <input type="number" id="q1k" step="0.01" required value = "140">
            </label><br>

            <label>L<sub>1d</sub> (m):
                <input type="number" id="L1" step="0.01" required value = "3.6">
            </label><br>
        </div>

        <div class="case-column">
            <p class= "underline">Case 2 loading inputs</p>
            <label>q<sub>2k</sub> (kPa):
                <input type="number" id="q2k" step="0.01" required value = "190">
            </label><br>

            <label>L<sub>2d</sub> (m):
                <input type="number" id="L2" step="0.01" required value = "3.1">
            </label><br>
        </div>
    </div>

<!-- GEOGRID OPTION-->

    <div class="input-column">
        <h3>Use a geogrid?</h3>
        <select id="geogrid" required>
            <option value="">-- Select --</option>
            <option value="yes">Yes</option>
            <option value="no">No</option>
        </select>
    </div>

    <div class = "container hidden" id = "geogridInputs">
        <div class="cell">
            <label>T<sub>allowable</sub> (kN/m):</label>
            <input type="number" id="Tallowable" step="0.01" value = "15">
        </div>
        <div class="cell">
            <label>n: &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp </label>
            <input type="number" id="n" step="0.01" value = "2">
        </div>
    </div>

    <br>
    <button type="submit" id="calculateBtn">Submit</button>


    </div>
</form>
<!-- INPUTS ENDS-->

<!-- CU ALERT -->


<div id="cuAlert" class="alert hidden">
    Subgrade strength is outside of BRE recommended parameters (between 20 and 80 kPa). Another method is recommended
</div>





<!-- PLATFORM REQUIRED BOX -->
<div class="box hidden" id="cohesivePlatformDecision">
   <p>N<sub>c</sub> = (2+π) = 5.14</p>
   <p>N<sub>γp</sub> = <span class="Ngamma_value"></span></p>
   <p>K<sub>p</sub>tanδ = <span class="kptandelta_value"></span></p>

   <div class="cases-container">
      <div class="case-column">
         <h3>Case 1 loading results</h3>
         <p>s<sub>c1</sub> = 1 + 0.2(W/L<sub>1d</sub>) = <span class="sc1_value"></span></p>
         <p>s<sub>γ1</sub> = 1 - 0.3(W/L<sub>1d</sub>) = <span class="sgamma1_value"></span></p>
         <p>s<sub>p1</sub> = 1 + (W/L<sub>1d</sub>) = <span class="sp1_value"></span></p>
      </div>

      <div class="case-column">
         <h3>Case 2 loading results</h3>
         <p>s<sub>c2</sub> = 1 + 0.2(W/L<sub>2d</sub>) = <span class="sc2_value"></span></p>
         <p>s<sub>γ2</sub> = 1 - 0.3(W/L<sub>2d</sub>) = <span class="sgamma2_value"></span></p>
         <p>s<sub>p2</sub> = 1 + (W/L<sub>2d</sub>) = <span class="sp2_value"></span></p>
      </div>
   </div>

   <h3>Check if a working platform is required</h3>
    <span>Check that subgrade cannot provide required bearing resistance without a working platform:</span>

    <div class="cases-container">
        <div class="case-column">
            <p  class= "underline">Case loading 1:</p>
            <p>R<sub>d1</sub> = c<sub>u</sub>N<sub>c</sub>s<sub>c1</sub> = 
                <span class="cu_value"></span> x 5.14 x 
                <span class = "sc1_value"></span> =
                <span class="Rd1NoGeoGrid_value"></span> kPa
            </p>
            <p>q<sub>1d</sub> = 2.0q<sub>1k</sub> = 2.0 x <span class= "q1k_value"></span> = <span class= "q1dA_value"></span> kPa</p>
        </div>
        <div class="case-column">
            <p class= "underline">Case loading 2:</p>
            <p>R<sub>d2</sub> = c<sub>u</sub>N<sub>c</sub>s<sub>c2</sub> = 
                <span class="cu_value"></span> x 5.14 x 
                <span class = "sc2_value"></span> =
                <span class="Rd2NoGeoGrid_value"></span> kPa</p>
            <p>q<sub>2d</sub> = 1.5q<sub>2k</sub> = 1.5 x <span class= "q2k_value"></span> = <span class= "q2dA_value"></span> kPa</p>
        </div>
    </div>
    <p id= "twpDecision" class = "indented"></p>
    </div>

<!-- PLATFORM MATERIAL BOX-->
<div class= "box hidden" id="platformMaterial" >
    <h3> Check that platform material is stronger than subgrade:</h3>
    <div class = "cases-container">
        <div class="case-column">
            <p class= "underline">Case loading 1:</p>
            <p>0.5γ<sub>p</sub>W<sub>d</sub> N<sub>γp</sub> s<sub>γ1</sub>
            = <br> 0.5 x <span class="gamma_value"></span> x <span class="W_value"></span> 
            x <span class="Ngamma_value"></span> x <span class="sgamma1_value"></span>
            = <span class="platformBC1_value"></span> kPa
            <P>c<sub>u</sub>N<sub>c</sub>s<sub>c1</sub> = <span class="Rd1NoGeoGrid_value"></span> kPa</P>
        </div>
        <div class= "case-column">
            <p class= "underline">Case loading 2:</p>
            <p>0.5γ<sub>p</sub>W<sub>d</sub> N<sub>γp</sub> s<sub>γ2</sub>
            = <br> 0.5 x <span class="gamma_value"></span> x <span class="W_value"></span> 
            x <span class="Ngamma_value"></span> x <span class="sgamma2_value"></span>
            = <span class="platformBC2_value"></span> kPa
            <P>c<sub>u</sub>N<sub>c</sub>s<sub>c2</sub> = <span class="Rd2NoGeoGrid_value"></span> kPa</P>
        </div>

    </div>
    <p id = "subgradeVplatform" class = "indented" ></p> <br>


    <h3> Check that platform material can provide required bearing resistance when placed at a 
        thickness sufficient to ensure that the subgrade does not materially affect bearing capacity:</h3>
    <div class = "cases-container">
        <div class = "case-column">
            <p class= "underline">Case loading 1:</p>
            <p>q<sub>1d</sub> = 1.6q<sub>1k</sub> 
            = 1.6 x <span class="q1k_value"></span>
            = <span class="q1dB_value"></span> kPa</p>
            <p>0.5γ<sub>p</sub>W<sub>d</sub> N<sub>γp</sub> s<sub>γ1</sub>
            = <span class="platformBC1_value"></span> kPa</p>
        </div>
        <div class = "case-column">
            <p class= "underline">Case loading 2:</p>
            <p>q<sub>2d</sub> = 1.2q<sub>2k</sub> 
            = 1.2 x <span class="q2k_value"></span>
            = <span class="q2dB_value"></span> kPa</p>
            <p>0.5γ<sub>p</sub>W<sub>d</sub> N<sub>γp</sub> s<sub>γ2</sub>
            = <span class="platformBC2_value"></span> kPa</p>
        </div>
    </div>

    <p id = "bearingResistance" class = "indented" ></p> 

</div>

<!-- THICKNESS BOX-->
<div class="box hidden" id="thickness">
    <h3>Calculate the thickness of platform:</h3>
    <div class="cases-container">
        <div class="case-column">
            <p class= "underline">Case loading 1:</p>
            <p>D<sub>1</sub> = {W<sub>d</sub> [q<sub>1d</sub> - c<sub>u</sub>N<sub>c</sub>s<sub>c1</sub>
                / γ<sub>p</sub>K<sub>p</sub>tanδs<sub>p1</sub>]}<sup>0.5</sup></p>
            <p>Where q<sub>1d</sub> = 1.6 × q<sub>1k</sub></p>
            <p>
                D<sub>1</sub> = 
                (<span class="W_value"></span> × 
                ([1.6 × <span class="q1k_value"></span>] - <span class="subgradeBC1_value"></span>)) / 
                (<span class="gamma_value"></span> × <span class="kptandelta_value"></span> × <span class="sp1_value"></span>)
                <sup>0.5</sup>
                = <span class="D1NoGeogrid_value"></span> m
            </p>
        </div>

    <div class="case-column">
        <p class="underline">Case 2 loading:</p>
        <p>D<sub>2</sub> = {W<sub>d</sub> [q<sub>2d</sub> - c<sub>u</sub>N<sub>c</sub>s<sub>c2</sub>
            / γ<sub>p</sub>K<sub>p</sub>tanδs<sub>p2</sub>]}<sup>0.5</sup></p>
        <p>Where q<sub>2d</sub> = 1.2 × q<sub>2k</sub></p>
        <p>
            D<sub>2</sub> = 
            (<span class="W_value"></span> × 
            ([1.2 × <span class="q2k_value"></span>] - <span class="subgradeBC2_value"></span>)) / 
            (<span class="gamma_value"></span> × <span class="kptandelta_value"></span> × <span class="sp2_value"></span>)
            <sup>0.5</sup>
            = <span class="D2NoGeogrid_value"></span> m 
        </p>
        <br>
    </div>
    </div>
    <form id = "noGeogridForm">
        <div class = "container">
            <div class = "cell">
                <label for ="thicknessNoGeogridUserInput">
                    Selected thickness without geogrid (m):
                </label>
                <input type="number" id = "thicknessNoGeogridUserInput" step = "0.01" required>
            </div>
        </div>

        <button type="submit">Submit</button>

        
    </form>

</div>

<!-- DISMISSABLE ALERT -->
<div id="thicknessNoGeogridAlert" class="alert hidden">
    <span class="closebtn" onclick="
    this.parentElement.classList.add('hidden');
    updateSummaryVisibilityNoGeogrid();

    ">&times;</span>
    Selected thickness is smaller than calculated thickness, please confirm by closing message
</div>


<!-- GEOGRID THICKNESS BOX-->
<div class = "box hidden" id = "geogridBox">
    <h3> Calculate thickness with geogrid: </h3>
    <p>Geogrid with T<sub>ult</sub> = <span class = "Tult_value"></span> nK/m to be used.</p>
    <p>T<sub>d</sub> = T<sub>ult</sub> / 2 = <span class = "Td_value"></span> nK/m </p>
    <div class="cases-container">
        <div class = 'case-column'>
            <p class= "underline">Case 1 loading:</p>
            <!--First formula-->
            <p>D<sub>1</sub> = {W<sub>d</sub> [q<sub>1d</sub> - c<sub>u</sub>N<sub>c</sub>s<sub>c1</sub>
            - (2T<sub>d</sub> /W<sub>d</sub>)]
            / [γ<sub>p</sub>K<sub>p</sub>tanδs<sub>p1</sub>]}<sup>0.5</sup></p>
            <p>where q<sub>1d</sub> =  1.6q<sub>1k</sub></p>
            <p>
                D<sub>1</sub> = 
                {<span class="W_value"></span>  
                [(1.6 × <span class= "q1k_value"></span>) - <span class="subgradeBC1_value"></span> 
                - (2 x <span class = "Td_value"></span> / <span class ="W_value"></span>)] /
                [<span class="gamma_value"></span> × <span class="kptandelta_value"></span> × <span class="sp1_value"></span>]}
                <sup>0.5</sup>
                = <span class ="D1WithGeogrid_value"></span> m
            </p><br>
            <!--Second formula-->
            <p>D<sub>1</sub> (ignoring geogrid) = {W<sub>d</sub> [q<sub>1d</sub> - c<sub>u</sub>N<sub>c</sub>s<sub>c1</sub>
                / γ<sub>p</sub>K<sub>p</sub>tanδs<sub>p1</sub>]}<sup>0.5</sup></p>
            <p>Where q<sub>1d</sub> = 1.25 × q<sub>1k</sub></p>
            <p>
                D<sub>1</sub> = 
                (<span class="W_value"></span> × 
                ([1.25 × <span class="q1k_value"></span>] - <span class="subgradeBC1_value"></span>)) / 
                (<span class="gamma_value"></span> × <span class="kptandelta_value"></span> × <span class="sp1_value"></span>)
                <sup>0.5</sup>
                = <span class="D1NoGeogridC_value"></span> m
            </p> <br><br>
            <!--Max D1-->
            <p class = "indented">Max D1  =  <span class ="D1largerWithGeorgrid_value"></span> m</p>
        </div>
            <div class = 'case-column'>
            <p class="underline">Case 2 loading:</p>
            <!--First formula-->
            <p>D<sub>2</sub> = {W<sub>d</sub> [q<sub>2d</sub> - c<sub>u</sub>N<sub>c</sub>s<sub>c2</sub>
            - (2T<sub>d</sub> /W<sub>d</sub>)]
            / [γ<sub>p</sub>K<sub>p</sub>tanδs<sub>p2</sub>]}<sup>0.5</sup></p>
            <p>where q<sub>2d</sub> =  1.2q<sub>2k</sub></p>
            <p>
                D<sub>2</sub> = 
                {<span class="W_value"></span>  
                [(1.2 × <span class= "q2k_value"></span>) - <span class="subgradeBC2_value"></span> 
                - (2 x <span class = "Td_value"></span> / <span class ="W_value"></span>)] /
                [<span class="gamma_value"></span> × <span class="kptandelta_value"></span> × <span class="sp2_value"></span>]}
                <sup>0.5</sup>
                = <span class ="D2WithGeogrid_value"></span> m
            </p><br>
              <!--Second formula-->
            <p>D<sub>2</sub> (ignoring geogrid) = {W<sub>d</sub> [q<sub>2d</sub> - c<sub>u</sub>N<sub>c</sub>s<sub>c2</sub>
                / γ<sub>p</sub>K<sub>p</sub>tanδs<sub>p2</sub>]}<sup>0.5</sup></p>
            <p>Where q<sub>2d</sub> = 1.05 × q<sub>2k</sub></p>
            <p>
                D<sub>2</sub> = 
                (<span class="W_value"></span> × 
                ([1.05 × <span class="q2k_value"></span>] - <span class="subgradeBC2_value"></span>)) / 
                (<span class="gamma_value"></span> × <span class="kptandelta_value"></span> × <span class="sp2_value"></span>)
                <sup>0.5</sup>
                = <span class="D2NoGeogridC_value"></span> m    
            </p> <br><br>
            <!--Max D1=2-->
            <p class = "indented">Max D2  =  <span class ="D2largerWithGeorgrid_value"></span> m</p>
        </div>
    </div>

        <form id = "withGeogridForm">
        <div class = "container">
            <div class = "cell">
                <label for ="thicknessWithGeogridUserInput">
                    Selected thickness without geogrid (m):
                </label>
                <input type="number" id = "thicknessWithGeogridUserInput" step = "0.01" required>
            </div>
        </div>

        <button type="submit">Submit</button>

        
    </form>

</div>

<!-- DISMISSABLE ALERT -->
<div id="thicknessWITHGeogridAlert" class="alert hidden">
    <span class="closebtn" onclick="
    this.parentElement.classList.add('hidden');
    updateSummaryVisibilityWithGeogrid();
    ">&times;</span>
    Selected thickness is smaller than calculated thickness, please confirm by closing message
</div>


<!--SUMMARY SECTION-->
<div class="box hidden" id="userParagraphSection">
    <h3>Enter your summary paragraph:</h3>
    <textarea id="userParagraphInput" placeholder="Type your paragraph here..." style="width:100%; min-height:120px;"></textarea>
    <br>
    <!-- <button id="submitParagraphBtn" type="button">Insert Paragraph</button>
    <h3>Preview:</h3>
    <div id="userParagraphDisplay" style="white-space: pre-wrap; border: 1px solid #ccc; padding: 10px; min-height: 80px;"></div> --> 
</div>


</div>

</div>

<script type="module" src="js/main.js"></script>


</body>
</html>
