<!DOCTYPE html>
<html lang = "en">
<head>
    <title>AOS TWP Design</title>
    <meta charset= "utf-8">
    <meta name = "viewport" content = "width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
<!-- REPORT HEADER PAGE 1 -->
<div class="report-header">

    <!-- Left column: Project No & Designer -->
    <div class="header-column left-column">
        <div class="input-row">
            <label for="projectNo">Project No&nbsp;&nbsp; :</label>
            <input id="projectNo" type="text" placeholder="Enter project number">
        </div>
        <div class="input-row">
            <label for="designer">Designer&nbsp;&nbsp;&nbsp;&nbsp; :</label>
            <input id="designer" type="text" placeholder="Enter designer name">
        </div>
    </div>

    <!-- Center column: Logo -->
    <div class="header-column center-column">
        <img src="images/AOS_logo.png" alt="Logo" class="logo">
    </div>

    <!-- Right column: Date & Page -->
    <div class="header-column right-column">
        <div class="input-row">
            <label for="reportDate">Date:</label>
            <input id="reportDate" type="date">
        </div>
        <span>Page 1 of 2</span>
    </div>

</div>


<div class = "report-container">
<h1>Temporary Working Platform Design (BRE 470)</h1>
<!-- FORM 1: Soil Selection -->
<form id="soil-selection-form">
    <div class="box">
        <label for="soilType">Subgrade Soil Type:</label>
        <select id="soilType" required title="subgrade soil type required">
            <option value="">-- Select Soil Type --</option>
            <option value="cohesive">Cohesive</option>
            <option value="granular">Granular</option>
        </select>
    </div>
</form>

<!-- FORM 2: Cohesive Inputs -->
<form id="cohesive-inputs" class="box hidden">
    <h3>Design values for soil properties</h3>

    <div class="container">
        <div class="cell">
            <label for="subgrade">Subgrade undrained shear strength, Cu (kPa): </label>
            <label>C<sub>u</sub> (kPa):</label>
            <input type="number" id="cu" step="0.01" required value="24">
        </div>

        <div class="cell">
            <label for="phi">Working platform</label>
            <label>ϕ'<sub>p</sub> (°):</label>
            <input type="number" id="phi" step="0.01" required value="40">
            <label for="gamma">  </label>
            <label>γ<sub>p</sub> (kN/m³):</label>
            <input type="number" id="gamma" step="0.01" required value="20">
        </div>
    </div>

    <h3>Effective width and length of loading</h3>
    <div class="cell">
        <label>Effective width, W<sub>d</sub> (m): </label>
        <input type="number" id="W" step="0.01" required value="0.7">
    </div>

    <div class="cases-container">
        <div class="case-column">
            <p class="underline">Case 1 loading inputs</p>
            <label>Rectangular loading, q<sub>1k</sub> (kPa):
                <input type="number" id="q1k" step="0.01" required value="140">
            </label><br>
            <label>Effective length, L<sub>1d</sub> (m):
                <input type="number" id="L1" step="0.01" required value="3.6">
            </label><br>
        </div>

        <div class="case-column">
            <p class="underline">Case 2 loading inputs</p>
            <label>Rectangular loading, q<sub>2k</sub> (kPa):
                <input type="number" id="q2k" step="0.01" required value="190">
            </label><br>
            <label>Effective length, L<sub>2d</sub> (m):
                <input type="number" id="L2" step="0.01" required value="3.1">
            </label><br>
        </div>
    </div>
</form>

<!-- FORM 3: Geogrid Selection -->
<form id="geogrid-inputs" class="box hidden">
    <div class="input-column">
        <h3>Use a geogrid?</h3>
        <select id="geogrid" required>
            <option value="">-- Select --</option>
            <option value="yes">Yes</option>
            <option value="no">No</option>
        </select>
    </div>

    <div class="container hidden" id="geogridValues">
        <div class="cell">
            <label>Geogrid allowable tensile strength, T<sub>allowable</sub> (kN/m):</label>
            <input type="number" id="Tallowable" step="0.01" value="15">
        </div>
        <div class="cell">
            <label>No. of geogrids, n: </label>
            <input type="number" id="n" step="0.01" value="2">
        </div>
    </div>
</form>


<!-- INPUTS ENDS-->

<!-- CU ALERT -->


<div id="cuAlert" class="alert hidden">
    Subgrade strength is outside of BRE recommended parameters (between 20 and 80 kPa). Another method is recommended
</div>




<!-- PLATFORM REQUIRED BOX -->
<div class="box hidden" id="cohesivePlatformDecision">

<div class="equation-row">
    <div class="equation-column">
        <p>N<sub>c</sub> = 5.14</p>
        <!-- Ngamma MathML-->
        <p>
            N<sub>γp</sub> =
                <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline">
                    <mrow>
                        <mn>2</mn>
                        <mo>&#x22C5;</mo>
                        <mi>tan</mi>
                        <mo>(</mo>
                        <mfrac>
                            <mrow>
                                <mi>φ</mi>
                                <mi>π</mi>
                            </mrow>
                            <mn>180</mn>
                        </mfrac>
                        <mo>)</mo>
                        <mo>&#x22C5;</mo>
                        <mo>(</mo>
                        <mn>1</mn>
                        <mo>+</mo>

                        <!-- e^( π·tan(φπ/180) ) -->
                        <msup>
                            <mi>e</mi>
                            <mrow>
                                <mo>(</mo>
                                <mi>π</mi>
                                <mo>&#x22C5;</mo>
                                <mi>tan</mi>
                                <mo>(</mo>
                                <mfrac>
                                    <mrow>
                                        <mi>φ</mi>
                                        <mi>π</mi>
                                    </mrow>
                                    <mn>180</mn>
                                </mfrac>
                                <mo>)</mo>
                                <mo>)</mo>
                            </mrow>
                        </msup>

                        <mo>&#x22C5;</mo>

                        <!-- tan( π/4 + φπ/360 )^2 -->
                        <msup>
                            <mrow>
                                <mi>tan</mi>
                                <mo>(</mo>
                                <mfrac>
                                    <mi>π</mi>
                                    <mn>4</mn>
                                </mfrac>
                                <mo>+</mo>
                                <mfrac>
                                    <mrow>
                                        <mi>φ</mi>
                                        <mi>π</mi>
                                    </mrow>
                                    <mn>360</mn>
                                </mfrac>
                                <mo>)</mo>
                            </mrow>
                            <mn>2</mn>
                        </msup>

                        <mo>)</mo>
                    </mrow>
                </math>
                = <span class="Ngamma_value"></span>
        </p>
        <!-- Kptandelta MathML-->
        <p>
            K<sub>p</sub>tanδ =
                <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline">
                    <mrow>
                        <msup>
                            <mn>10</mn>
                            <mrow>
                                <mo>(</mo>
                                <mn>-0.5061</mn>
                                <mo>+</mo>
                                <mn>0.01095</mn><mi>φ</mi>
                                <mo>+</mo>
                                <mn>5.03</mn>
                                <mo>&#x00D7;</mo>
                                <msup><mn>10</mn><mn>-4</mn></msup>
                                <msup><mi>φ</mi><mn>2</mn></msup>
                                <mo>)</mo>
                            </mrow>
                        </msup>
                    </mrow>
                </math>
                = <span class="kptandelta_value"></span>
        </p>
    </div>

    <div class="image-column">
        <img src="images/Ngamma_graph.png" alt="Ngamma_graph" class="Ngamma_graph">
        <img src="images/Kptandelta_graph.png" alt="Kptandelta_graph" class="Kptandelta_graph">

    </div>
</div>


   <div class="cases-container">
      <div class="case-column">
         <h3>Case 1 loading results</h3>
         <p>s<sub>c1</sub> = 1 + 0.2(W/L<sub>1d</sub>) = <span class="sc1_value"></span></p>
         <p>s<sub>γ1</sub> = 1 - 0.3(W/L<sub>1d</sub>) = <span class="sgamma1_value"></span></p>
         <p>s<sub>p1</sub> = 1 + (W/L<sub>1d</sub>) = <span class="sp1_value"></span></p>
      </div>

      <div class="case-column">
         <h3>Case 2 loading results</h3>
         <p>s<sub>c2</sub> = 1 + 0.2(W/L<sub>2d</sub>) = <span class="sc2_value"></span></p>
         <p>s<sub>γ2</sub> = 1 - 0.3(W/L<sub>2d</sub>) = <span class="sgamma2_value"></span></p>
         <p>s<sub>p2</sub> = 1 + (W/L<sub>2d</sub>) = <span class="sp2_value"></span></p>
      </div>
   </div>

   <h3>Check if a working platform is required</h3>
    <span>Check that subgrade cannot provide required bearing resistance without a working platform:</span>

    <div class="cases-container">
        <div class="case-column">
            <p  class= "underline">Case loading 1:</p>
            <p>R<sub>d1_subgrade</sub> = c<sub>u</sub>N<sub>c</sub>s<sub>c1</sub> = 
                <span class="cu_value"></span> x 5.14 x 
                <span class = "sc1_value"></span> =
                <span class="Rd1NoGeoGrid_value"></span> kPa
            </p>
            <p>q<sub>1d</sub> = 2.0q<sub>1k</sub> = 2.0 x <span class= "q1k_value"></span> = <span class= "q1dA_value"></span> kPa</p>
        </div>
        <div class="case-column">
            <p class= "underline">Case loading 2:</p>
            <p>R<sub>d2_subgrade</sub> = c<sub>u</sub>N<sub>c</sub>s<sub>c2</sub> = 
                <span class="cu_value"></span> x 5.14 x 
                <span class = "sc2_value"></span> =
                <span class="Rd2NoGeoGrid_value"></span> kPa</p>
            <p>q<sub>2d</sub> = 1.5q<sub>2k</sub> = 1.5 x <span class= "q2k_value"></span> = <span class= "q2dA_value"></span> kPa</p>
        </div>
    </div>
    <p id= "twpDecision" class = "indented"></p>
    </div>

<!-- PLATFORM MATERIAL BOX-->
<div class= "box hidden" id="platformMaterial" >
    <h3> Check that platform material is stronger than subgrade:</h3>
    <div class = "cases-container">
        <div class="case-column">
            <p class= "underline">Case 1 shape factors:</p>
            <p>R<sub>d1_platform</sub> = 10.5γ<sub>p</sub>W<sub>d</sub> N<sub>γp</sub> s<sub>γ1</sub>
            = <br> 0.5 x <span class="gamma_value"></span> x <span class="W_value"></span> 
            x <span class="Ngamma_value"></span> x <span class="sgamma1_value"></span>
            = <span class="platformBC1_value"></span> kPa
            <P>R<sub>d1_subgrade</sub> = <span class="Rd1NoGeoGrid_value"></span> kPa</P>
        </div>
        <div class= "case-column">
            <p class= "underline">Case 2 shape factors:</p>
            <p>R<sub>d2_platform</sub> = 0.5γ<sub>p</sub>W<sub>d</sub> N<sub>γp</sub> s<sub>γ2</sub>
            = <br> 0.5 x <span class="gamma_value"></span> x <span class="W_value"></span> 
            x <span class="Ngamma_value"></span> x <span class="sgamma2_value"></span>
            = <span class="platformBC2_value"></span> kPa
            <P>R<sub>d2_subgrade</sub> <span class="Rd2NoGeoGrid_value"></span> kPa</P>
        </div>

    </div>
    <p id = "subgradeVplatform" class = "indented" ></p> <br>


    <h3> Check that platform material can provide required bearing resistance when placed at a 
        thickness sufficient to ensure that the subgrade does not materially affect bearing capacity:</h3>
    <div class = "cases-container">
        <div class = "case-column">
            <p class= "underline">Case loading 1:</p>
            <p>q<sub>1d</sub> = 1.6q<sub>1k</sub> 
            = 1.6 x <span class="q1k_value"></span>
            = <span class="q1dB_value"></span> kPa</p>
            <p>R<sub>d1_platform</sub>
            = <span class="platformBC1_value"></span> kPa</p>
        </div>
        <div class = "case-column">
            <p class= "underline">Case loading 2:</p>
            <p>q<sub>2d</sub> = 1.2q<sub>2k</sub> 
            = 1.2 x <span class="q2k_value"></span>
            = <span class="q2dB_value"></span> kPa</p>
            <p>R<sub>d2_platform</sub>
            = <span class="platformBC2_value"></span> kPa</p>
        </div>
    </div>

    <p id = "bearingResistance" class = "indented" ></p> 

</div>

<!-- THICKNESS BOX-->
<div class="box hidden" id="thickness">
    <h3>Calculate the thickness of platform without geogrid:</h3>
    <div class="cases-container">
        <div class="case-column">
            <p class= "underline">Case loading 1:</p>
            <p>D<sub>1</sub> = {W<sub>d</sub> [q<sub>1d</sub> - c<sub>u</sub>N<sub>c</sub>s<sub>c1</sub>
                / γ<sub>p</sub>K<sub>p</sub>tanδs<sub>p1</sub>]}<sup>0.5</sup></p>
            <p>Where q<sub>1d</sub> = 1.6 × q<sub>1k</sub></p>
            <p>
                D<sub>1</sub> = 
                (<span class="W_value"></span> × 
                ([1.6 × <span class="q1k_value"></span>] - <span class="subgradeBC1_value"></span>)) / 
                (<span class="gamma_value"></span> × <span class="kptandelta_value"></span> × <span class="sp1_value"></span>)
                <sup>0.5</sup>
                = <span class="D1NoGeogrid_value"></span> m
            </p>
        </div>

    <div class="case-column">
        <p class="underline">Case 2 loading:</p>
        <p>D<sub>2</sub> = {W<sub>d</sub> [q<sub>2d</sub> - c<sub>u</sub>N<sub>c</sub>s<sub>c2</sub>
            / γ<sub>p</sub>K<sub>p</sub>tanδs<sub>p2</sub>]}<sup>0.5</sup></p>
        <p>Where q<sub>2d</sub> = 1.2 × q<sub>2k</sub></p>
        <p>
            D<sub>2</sub> = 
            (<span class="W_value"></span> × 
            ([1.2 × <span class="q2k_value"></span>] - <span class="subgradeBC2_value"></span>)) / 
            (<span class="gamma_value"></span> × <span class="kptandelta_value"></span> × <span class="sp2_value"></span>)
            <sup>0.5</sup>
            = <span class="D2NoGeogrid_value"></span> m 
        </p>
        <br>
    </div>
    </div>
    <form id = "noGeogridForm">
        <div class = "container">
            <div class = "cell">
                <label for ="thicknessNoGeogridUserInput">
                    Selected thickness without geogrid (m):
                </label>
                <input type="number" id = "thicknessNoGeogridUserInput" step = "0.01" required>
            </div>
        </div>

        <button type="submit">Submit</button>

        
    </form>

</div>

<!-- DISMISSABLE ALERT -->
<div id="thicknessNoGeogridAlert" class="alert hidden">
    <span class="closebtn" onclick="
    this.parentElement.classList.add('hidden');
    updateSummaryVisibilityNoGeogrid();

    ">&times;</span>
    Selected thickness is smaller than calculated thickness, please confirm by closing message
</div>


<!-- GEOGRID THICKNESS BOX-->
<div class = "box hidden" id = "geogridBox">
    <h3> Calculate thickness with geogrid: </h3>
    <p>T<sub>d</sub> = T<sub>allowable</sub> x n = <span class="Tallowable_value"></span>
         x <span class = "n_value"></span> = <span class = "Td_value"></span> nK/m </p>
    <div class="cases-container">
        <div class = 'case-column'>
            <p class= "underline">Case 1 loading:</p>
            <!--First formula-->
            <p>D<sub>1</sub> = {W<sub>d</sub> [q<sub>1d</sub> - c<sub>u</sub>N<sub>c</sub>s<sub>c1</sub>
            - (2T<sub>d</sub> /W<sub>d</sub>)]
            / [γ<sub>p</sub>K<sub>p</sub>tanδs<sub>p1</sub>]}<sup>0.5</sup></p>
            <p>where q<sub>1d</sub> =  1.6q<sub>1k</sub></p>
            <p>
                D<sub>1</sub> = 
                {<span class="W_value"></span>  
                [(1.6 × <span class= "q1k_value"></span>) - <span class="subgradeBC1_value"></span> 
                - (2 x <span class = "Td_value"></span> / <span class ="W_value"></span>)] /
                [<span class="gamma_value"></span> × <span class="kptandelta_value"></span> × <span class="sp1_value"></span>]}
                <sup>0.5</sup>
                = <span class ="D1WithGeogrid_value"></span> m
            </p><br>
            <!--Second formula-->
            <p>D<sub>1</sub> (ignoring geogrid) = {W<sub>d</sub> [q<sub>1d</sub> - c<sub>u</sub>N<sub>c</sub>s<sub>c1</sub>
                / γ<sub>p</sub>K<sub>p</sub>tanδs<sub>p1</sub>]}<sup>0.5</sup></p>
            <p>Where q<sub>1d</sub> = 1.25 × q<sub>1k</sub></p>
            <p>
                D<sub>1</sub> = 
                (<span class="W_value"></span> × 
                ([1.25 × <span class="q1k_value"></span>] - <span class="subgradeBC1_value"></span>)) / 
                (<span class="gamma_value"></span> × <span class="kptandelta_value"></span> × <span class="sp1_value"></span>)
                <sup>0.5</sup>
                = <span class="D1NoGeogridC_value"></span> m
            </p> <br><br>
            <!--Max D1-->
            <p class = "indented">Max D1  =  <span class ="D1largerWithGeorgrid_value"></span> m</p>
        </div>
            <div class = 'case-column'>
            <p class="underline">Case 2 loading:</p>
            <!--First formula-->
            <p>D<sub>2</sub> = {W<sub>d</sub> [q<sub>2d</sub> - c<sub>u</sub>N<sub>c</sub>s<sub>c2</sub>
            - (2T<sub>d</sub> /W<sub>d</sub>)]
            / [γ<sub>p</sub>K<sub>p</sub>tanδs<sub>p2</sub>]}<sup>0.5</sup></p>
            <p>where q<sub>2d</sub> =  1.2q<sub>2k</sub></p>
            <p>
                D<sub>2</sub> = 
                {<span class="W_value"></span>  
                [(1.2 × <span class= "q2k_value"></span>) - <span class="subgradeBC2_value"></span> 
                - (2 x <span class = "Td_value"></span> / <span class ="W_value"></span>)] /
                [<span class="gamma_value"></span> × <span class="kptandelta_value"></span> × <span class="sp2_value"></span>]}
                <sup>0.5</sup>
                = <span class ="D2WithGeogrid_value"></span> m
            </p><br>
              <!--Second formula-->
            <p>D<sub>2</sub> (ignoring geogrid) = {W<sub>d</sub> [q<sub>2d</sub> - c<sub>u</sub>N<sub>c</sub>s<sub>c2</sub>
                / γ<sub>p</sub>K<sub>p</sub>tanδs<sub>p2</sub>]}<sup>0.5</sup></p>
            <p>Where q<sub>2d</sub> = 1.05 × q<sub>2k</sub></p>
            <p>
                D<sub>2</sub> = 
                (<span class="W_value"></span> × 
                ([1.05 × <span class="q2k_value"></span>] - <span class="subgradeBC2_value"></span>)) / 
                (<span class="gamma_value"></span> × <span class="kptandelta_value"></span> × <span class="sp2_value"></span>)
                <sup>0.5</sup>
                = <span class="D2NoGeogridC_value"></span> m    
            </p> <br><br>
            <!--Max D1=2-->
            <p class = "indented">Max D2  =  <span class ="D2largerWithGeorgrid_value"></span> m</p>
        </div>
    </div>

        <form id = "withGeogridForm">
        <div class = "container">
            <div class = "cell">
                <label for ="thicknessWithGeogridUserInput">
                    Selected thickness with geogrid (m):
                </label>
                <input type="number" id = "thicknessWithGeogridUserInput" step = "0.01" required>
            </div>
        </div>

        <button type="submit">Submit</button>

        
    </form>

</div>

<!-- DISMISSABLE ALERT -->
<div id="thicknessWITHGeogridAlert" class="alert hidden">
    <span class="closebtn" onclick="
    this.parentElement.classList.add('hidden');
    updateSummaryVisibilityWithGeogrid();
    ">&times;</span>
    Selected thickness is smaller than calculated thickness, please confirm by closing message
</div>


<!--SUMMARY SECTION-->
<div class="box hidden" id="userParagraphSection">
    <h3>Enter your summary paragraph:</h3>
    <textarea id="userParagraphInput" placeholder="Type your paragraph here..." style="width:100%; min-height:120px;"></textarea>
    <br>
    <!-- <button id="submitParagraphBtn" type="button">Insert Paragraph</button>
    <h3>Preview:</h3>
    <div id="userParagraphDisplay" style="white-space: pre-wrap; border: 1px solid #ccc; padding: 10px; min-height: 80px;"></div> --> 
</div>


</div>

</div>

<script type="module" src="js/main.js"></script>


</body>
</html>
